{"title":"module.exports 与 exports 的区别（极简）","date":"2020-08-16T07:20:41.000Z","link":"post/20-08-16-exports","tags":["javascript"],"updated":"2021-06-12T10:38:29.396Z","content":"<p>这个问题简单解释起来只有一句话: <code>module.exports</code> 是实际存储模块的对象，而 <code>exports</code> 只是存储对 <code>module.exports</code> 对象引用的变量。因而直接修改 <code>exports</code> 的并不会修改模块的导出信息。</p>\n<p>这些在官方文档内也有说明 <a href=\"https://nodejs.org/docs/latest-v9.x/api/modules.html\" target=\"_blank\" rel=\"noopener\">https://nodejs.org/docs/latest-v9.x/api/modules.html</a></p>\n<p>代码示例：</p>\n<figure class=\"highlight js\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">exports.name = <span class=\"string\">'Alan'</span>;</span><br><span class=\"line\">exports.test = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'hi'</span>)</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 给导出的对象添加属性，直接这样就好了</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">module</span>) <span class=\"comment\">// &#123; exports: &#123; name: 'Alan', test: [Function] &#125; &#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\">exports = &#123;</span><br><span class=\"line\">  name: <span class=\"string\">'Bob'</span>,</span><br><span class=\"line\">  add: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">a, b</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> a + b;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 不过 ① exports 是一个引用，直接赋值给它，只是让这个变量等于另外一个引用</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(exports) <span class=\"comment\">// &#123; name: 'Bob', add: [Function] &#125;</span></span><br><span class=\"line\"><span class=\"comment\">// 并不会修改到导出的对象</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">module</span>) <span class=\"comment\">// &#123; exports: &#123; name: 'Alan', test: [Function] &#125; &#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  name: <span class=\"string\">'Bob'</span>,</span><br><span class=\"line\">  add: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">a, b</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> a + b;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ∵① 所以 只有通过 module.exports 才能真正修改到 exports 本身</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">module</span>) <span class=\"comment\">// &#123; exports: &#123; name: 'Bob', add: [Function] &#125; &#125;</span></span><br></pre></td></tr></table></div></figure>\n\n","prev":{"title":"Vue 踩坑记录与经验分享记录","link":"post/vue"},"next":{"title":"安装 node C++ 模块的常见问题 \"node.lib:fatal error LNK1127\"","link":"post/20-08-26-nodegyp"},"plink":"https://yanoo1497.github.io/post/20-08-16-exports/"}