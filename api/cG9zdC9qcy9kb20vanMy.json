{"title":"跨浏览器的javascript中鼠标滚轮事件","date":"2019-03-30T05:15:01.583Z","link":"post/js/dom/js2","tags":["javascript"],"updated":"2019-08-04T10:43:37.287Z","content":"<h1 id=\"跨浏览器的javascript中鼠标滚轮事件\">跨浏览器的javascript中鼠标滚轮事件<a href=\"post/js/dom/js2#跨浏览器的javascript中鼠标滚轮事件\"></a></h1><p>参考：<br><a href=\"http://www.jb51.net/article/66710.htm\" target=\"_blank\" rel=\"noopener\">解析javascript中鼠标滚轮事件</a></p>\n<p><a href=\"http://www.zhangxinxu.com/wordpress/2013/04/js-mousewheel-dommousescroll-event/\" target=\"_blank\" rel=\"noopener\">JS滚轮事件(mousewheel/DOMMouseScroll)了解</a></p>\n<h5 id=\"1-事件绑定\">1.事件绑定<a href=\"post/js/dom/js2#1-事件绑定\"></a></h5><p>Firefox使用addEventListener添加滚轮事件</p>\n<figure class=\"highlight plain\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/*Firefox注册事件*/</span><br><span class=\"line\">if(document.addEventListener)&#123;</span><br><span class=\"line\">    document.addEventListener(&apos;DOMMouseScroll&apos;,scrollFunc,false);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<p>其中除Firefox外其余均可使用HTML DOM方式添加事件，因此添加事件使用以下方式</p>\n<figure class=\"highlight plain\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/*注册事件*/</span><br><span class=\"line\">if(document.addEventListener)&#123;</span><br><span class=\"line\">    document.addEventListener(&apos;DOMMouseScroll&apos;,scrollFunc,false);</span><br><span class=\"line\">&#125;//W3C</span><br><span class=\"line\">window.onmousewheel=document.onmousewheel=scrollFunc;//IE/Opera/Chrome</span><br></pre></td></tr></table></div></figure>\n\n<h5 id=\"detail与wheelDelta\">detail与wheelDelta<a href=\"post/js/dom/js2#detail与wheelDelta\"></a></h5><p>判断滚轮向上或向下的属性值，现在五大浏览器（IE、Opera、Safari、Firefox、Chrome）中Firefox 使用detail，其余四类使用wheelDelta；两者只在取值上不一致，代表含义一致，detail与wheelDelta只各取两个值，detail只取±3，wheelDelta只取±120，其中FireFox浏览器向下滚动是正值，而其他浏览器是负值。</p>\n<h5 id=\"兼容写法\">兼容写法<a href=\"post/js/dom/js2#兼容写法\"></a></h5><figure class=\"highlight plain\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/**</span><br><span class=\"line\"> * 简易的判断滚动方向   </span><br><span class=\"line\"> */</span><br><span class=\"line\"> </span><br><span class=\"line\">var scrollFunc=function(e)&#123;</span><br><span class=\"line\">     var direct=0;</span><br><span class=\"line\">     e=e || window.event;</span><br><span class=\"line\">    var flag;</span><br><span class=\"line\">     if(e.wheelDelta)&#123;//IE/Opera/Chrome</span><br><span class=\"line\">         if(e.wheelDelta&gt;0)&#123;</span><br><span class=\"line\">             flag=&quot;up&quot;;</span><br><span class=\"line\">         &#125;else&#123;</span><br><span class=\"line\">              flag=&quot;down&quot;;</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">     &#125;else if(e.detail)&#123;//Firefox</span><br><span class=\"line\">        </span><br><span class=\"line\">     &#125;</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\">24 /*注册事件*/</span><br><span class=\"line\">25 if(document.addEventListener)&#123;</span><br><span class=\"line\">26     document.addEventListener(&apos;DOMMouseScroll&apos;,scrollFunc,false);</span><br><span class=\"line\">27 &#125;//W3C</span><br><span class=\"line\">28 window.onmousewheel=document.onmousewheel=scrollFunc;//IE/Opera/Chrome/Safari</span><br></pre></td></tr></table></div></figure>\n\n","prev":{"title":"常用js页面跳转方式","link":"post/js/dom/js3"},"next":{"title":"sass学习笔记","link":"post/css/sass/sass学习笔记"},"plink":"https://yanoo1497.github.io/blog/post/js/dom/js2/","toc":[{"title":"跨浏览器的javascript中鼠标滚轮事件","id":"跨浏览器的javascript中鼠标滚轮事件","index":"1"}]}